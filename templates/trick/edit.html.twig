{% extends 'base.html.twig' %}

{% block title %}Hello TrickController!{% endblock %}
{% block stylesheets %}
    <link href="{{ asset('css/trick.css') }}" rel="stylesheet"/>
    <link href="{{ asset('css/editTrick.css') }}" rel="stylesheet"/>

{% endblock %}
{% block body %}
    <form action="{{ path('trick_edit_post',{ 'id': trick.id }) }}" method="post">
        <div class="container container-border container-trick p-0">
            <div class="trick-img">
                <img src="{{ trick.picture[0].Link }}" alt="">
                <h1 class="trick-title">{{ trick.name }}</h1>
                <div class="trick-actions">
                    <i class="fa-solid fa-pencil"></i>
                    <i class="fa-solid fa-trash-can"></i>
                </div>
            </div>
            <div class="trick-body-content d-flex flex-column align-items-center mt-3">
                <div class="trick-media" id="media">
                    {% for key, picture in trick.picture %}
                        <div class="picture d-flex flex-column">
                            <img src="{{ picture.Link }}" alt="Photo n°{{ key + 1 }} de la figure" width="275"
                                 height="200">
                            <div class="media-actions align-self-end">
                                <a href="#" onclick=""><i class="fa-solid fa-pencil"></i></a>
                                <i class="fa-solid fa-trash-can"></i>
                            </div>
                        </div>
                    {% endfor %}
                    {% for video in trick.video %}
                        <div class="video d-flex flex-column">
                            <iframe width="275" height="200" src="{{ video.Link }}" title="YouTube video player"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                            <div class="media-actions align-self-end">
                                <i class="fa-solid fa-pencil"></i>
                                <i class="fa-solid fa-trash-can"></i>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <div class="form-media w-75 d-flex justify-content-start mb-3 mt-3">
                    <form class="form-floating w-100">
                        <input type="text" class="form-control media-control" id="media-url" placeholder="url">
                        <label for="media-url">Url de votre média</label>
                    </form>
                </div>
                <button type="button" class="btn btn-outline-success btn-media mt-2" onclick="showMedias()"
                        id="btn-media">Voir les medias
                </button>
                <div class="trick-description text-center mt-4 w-75">
                    <div class="form-floating">
                        <textarea class="form-control" name="trick-description" placeholder="Leave a comment here"
                                  id="trick-description" style="height: 100px">{{ trick.description }}</textarea>
                        <label for="trick-description">Description</label>
                    </div>
                </div>
                <div class="trick-group w-75 mt-3">
                    <div class="form-floating">
                        <select class="form-select" id="floatingSelect" aria-label="Floating label select example"
                                name="category">
                        <option selected value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                        </select>
                        <label for="floatingSelect">Works with selects</label>
                    </div>
                </div>
                <div class="trick-validation mb-5 mt-3 me-2">
                    <button type="button" class="btn btn-outline-danger">Supprimer</button>
                    <button type="submit" class="btn btn-outline-success" name="trick-btn-save" value="save">
                        Enregistrer
                    </button>
                </div>
            </div>
        </div>
    </form>
{% endblock %}
{% block javascripts %}
    <script>
        function showMedias() {
            let btnElement = document.getElementById("btn-media");
            let mediaElement = document.getElementById("media");
            if (mediaElement.classList.contains("d-flex")) {
                mediaElement.classList.remove("d-flex", "justify-content-center", "flex-row", "gap-3", "flex-wrap");
                btnElement.innerText = "Voir les medias";
            } else {
                mediaElement.classList.add("d-flex", "justify-content-center", "flex-row", "gap-3", "flex-wrap");
                btnElement.innerText = "Cacher les medias";
            }
        }
    </script>
{% endblock %}

