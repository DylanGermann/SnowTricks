{% extends 'base.html.twig' %}

{% block title %}SnowTricks - Inscription{% endblock %}
{% block stylesheets %}
    <link href="{{ asset('css/editTrick.css') }}" rel="stylesheet"/>
{% endblock %}
{% block body %}
    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
    {% endfor %}

    <h1 class="text-center">Inscription</h1>
    <div class="container mt-5 d-flex justify-content-center">
        <div class="logForm w-50">
            {{ form_start(registrationForm) }}
            {{ form_row(registrationForm.email, {'attr': {'class': 'form-control'}}) }}
            {{ form_row(registrationForm.username, {'attr': {'class': 'form-control'}}) }}
            {{ form_row(registrationForm.plainPassword.first, {
                label: 'Mot de passe',
                'attr': {'class': 'form-control'}
            }) }}
            {{ form_row(registrationForm.plainPassword.second, {
                label: 'Confirmez votre mot de passe',
                'attr': {'class': 'form-control'}
            }) }}

            <button type="submit" class="btn btn-outline-success mt-3" >S'enregister</button>
            {% if not registrationForm.vars.valid %}
                <ul class="alert alert-danger">
                    {# on affiche en premier les erreurs globales (cas classiques) #}
                    {% for error in registrationForm.vars.errors %}
                        <li>{{error.message}}</li>
                    {% endfor %}
                    {# ainsi que les erreurs congit cernant chaque champs #}
                    {% for child in registrationForm.children %}
                        {# si le champ à des erreur #}
                        {% if child.vars.errors is defined %}
                            {% for error in child.vars.errors %}
                                <li> {{error.message}} </li> {# on ajoute le label du champ devant l'erreur pour plus de précisions. #}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </ul>
            {% endif %}
            {{ form_end(registrationForm) }}
        </div>
    </div>
{% endblock %}
